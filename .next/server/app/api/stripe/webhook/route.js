"use strict";(()=>{var e={};e.id=757,e.ids=[757],e.modules={399:e=>{e.exports=require("next/dist/compiled/next-server/app-page.runtime.prod.js")},517:e=>{e.exports=require("next/dist/compiled/next-server/app-route.runtime.prod.js")},8243:(e,t,r)=>{r.r(t),r.d(t,{originalPathname:()=>m,patchFetch:()=>f,requestAsyncStorage:()=>c,routeModule:()=>d,serverHooks:()=>h,staticGenerationAsyncStorage:()=>l});var s={};r.r(s),r.d(s,{POST:()=>u,dynamic:()=>p});var a=r(9303),o=r(8716),i=r(670),n=r(7070);let p="force-dynamic";async function u(e){if("1"===process.env.DISABLE_VERCEL_WEBHOOK)return n.NextResponse.json({disabled:!0});let t=e.headers.get("stripe-signature");if(!t)return n.NextResponse.json({error:"missing stripe-signature"},{status:400});let r=Buffer.from(await e.arrayBuffer()),s=process.env.BACKEND_URL||"https://api.mapmystandards.ai",a=`${s}/api/v1/billing/webhook/stripe`;try{let s=await fetch(a,{method:"POST",body:r,headers:{"content-type":e.headers.get("content-type")||"application/json","stripe-signature":t,"x-forwarded-from":"nextjs-edge"}}),o=await s.text();try{let e=JSON.parse(o);return n.NextResponse.json(e,{status:s.status})}catch{return new n.NextResponse(o,{status:s.status})}}catch(e){return console.error("Failed forwarding Stripe webhook",e),n.NextResponse.json({error:"forward-failed",detail:e.message},{status:502})}}let d=new a.AppRouteRouteModule({definition:{kind:o.x.APP_ROUTE,page:"/api/stripe/webhook/route",pathname:"/api/stripe/webhook",filename:"route",bundlePath:"app/api/stripe/webhook/route"},resolvedPagePath:"/Users/jeremy.estrella/Desktop/MapMyStandards-main/app/api/stripe/webhook/route.ts",nextConfigOutput:"",userland:s}),{requestAsyncStorage:c,staticGenerationAsyncStorage:l,serverHooks:h}=d,m="/api/stripe/webhook/route";function f(){return(0,i.patchFetch)({serverHooks:h,staticGenerationAsyncStorage:l})}}};var t=require("../../../../webpack-runtime.js");t.C(e);var r=e=>t(t.s=e),s=t.X(0,[948,972],()=>r(8243));module.exports=s})();